# שלב ה – ממשק גרפי ואינטגרציה עם בסיס הנתונים

## שער

**שמות מגישים:** אביתר סאסי, ישראל שעשוע  
**שם המערכת:** מערכת ניהול עובדים  
**יחידה נבחרת:** אגף משאבי אנוש

---

## תוכן עניינים

1. [מבוא](#מבוא)  
2. [הוראות הפעלה](#הוראות-הפעלה)  
3. [מבנה המערכת](#מבנה-המערכת)  
4. [מסכים ואפשרויות](#מסכים-ואפשרויות)  
5. [עיצוב ותצוגה גרפית](#עיצוב-ותצוגה-גרפית)  
6. [שימוש בפונקציות ופרוצדורות](#שימוש-בפונקציות-ופרוצדורות)  
7. [סיכום](#סיכום)

---

## מבוא

בשלב זה פותחה מערכת ממשק גרפי מלאה לעבודה מול בסיס הנתונים, תוך שימוש ב־Python וספריית `tkinter`, עם עיצוב Dark Mode מודרני.  
הממשק מאפשר שליטה מלאה בנתונים ללא צורך בכתיבת SQL על ידי המשתמש.

---

## הוראות הפעלה

1. ודא כי PostgreSQL רץ וה־database בשם `DBProject` קיים.
2. התקן את החבילה הדרושה:

```bash
pip install psycopg2
```

3. הפעל את המערכת על ידי הרצת הקובץ `main.py`:

```bash
python main.py
```

4. ודא שקובץ `db_config.py` כולל את פרטי ההתחברות הנכונים.

---

## מבנה המערכת

- `main.py` – מסך הבית הראשי.
- `employee_screen.py` – ניהול עובדים (CRUD).
- `attendance_screen.py` – ניהול נוכחות.
- `department_screen.py` – ניהול מחלקות.
- `query_screen.py` – שאילתות ניתוחיות.
- `plsql_screen.py` – הרצת פרוצדורות/פונקציות.
- `search_screen.py` – חיפוש עובדים מתקדם.
- `db_config.py` – קובץ קונפיגורציית ההתחברות למסד.

---

## מסכים ואפשרויות

### 🧑‍💼 מסך ניהול עובדים

- הוספת עובד חדש
- עדכון פרטי עובד (שם ומחלקה)
- מחיקת עובד לפי מזהה
- הצגת טבלת עובדים

**צילום מסך:**  
![מסך ניהול עובדים](screenshots/employee_screen.png)

---

### 🕒 מסך רישום נוכחות

- הזנת כניסה ויציאה לעובדים
- בדיקת חוקיות השעה (Trigger מובנה)
- שליפה של כל רשומות הנוכחות

**צילום מסך:**  
![מסך נוכחות](screenshots/attendance_screen.png)

---

### 🏢 מסך ניהול מחלקות

- הוספת מחלקה חדשה
- עדכון פרטים קיימים
- מחיקת מחלקה
- הצגת רשימת מחלקות קיימות

**צילום מסך:**  
![מסך מחלקות](screenshots/department_screen.png)

---

### 📊 מסך שאילתות ניתוחיות

- עובדים ללא נוכחות
- כניסות מאוחרות (אחרי 09:00)
- מחלקות ללא מלאי
- עובדים ללא חוזה

**צילום מסך:**  
![מסך שאילתות](screenshots/query_screen.png)

---

### ⚙️ מסך פרוצדורות ו־PL/pgSQL

- `add_order_if_in_stock` – בדיקת מלאי לפני הזמנה
- `update_prices_by_percent` – עדכון מחירים כולל
- הפעלת פונקציות שנכתבו בשלב ד'

**צילום מסך:**  
![מסך פרוצדורות](screenshots/plsql_screen.png)

---

### 🔎 מסך חיפוש עובדים

- מאפשר חיפוש לפי מזהה, שם, או לפי שדה טקסט חופשי
- מציג תוצאות מדויקות במסך טקסט

**צילום מסך:**  
![מסך חיפוש](screenshots/search_screen.png)

---

## עיצוב ותצוגה גרפית

- **Dark Mode** מלא בכל המסכים
- שימוש בגווני אפור, תכלת וירוק לממשק נעים לעין
- שימוש בתצוגה טבלאית (באמצעות `Text` מנוקה), עם עימוד ברור
- עיצוב אחיד לכל המסכים
- מיקום הגיוני של כפתורים והנחיות ברורות

---

## שימוש בפונקציות ופרוצדורות

### פרוצדורות שהוטמעו:
- `add_order_if_in_stock(p_department_id, p_supplier_id, ...)`
- `update_prices_by_percent(p_percent)`

### פונקציות שהוטמעו:
- `get_employee_contract_count(emp_id)`
- `get_items_in_department(dept_id)`

הפונקציות והפרוצדורות זמינות דרך כפתורי `Run Procedure` או `Run Function` במסך `plsql_screen`.

---

## סיכום

שלב זה השלים את מערכת ניהול העובדים, עם ממשק משתמש מלא, גישה נוחה, עיצוב נעים לעין ואפשרות מלאה לעבודה עם בסיס הנתונים – כולל לוגיקה מורכבת, שאילתות, שליפות ועדכונים.

---

## קבצים ותיקיות להגשה

- תיקיית הקוד: `שלב ה/`
- קובץ הפעלה: `main.py`
- תיקיית `screenshots/` עם כל הצילומים
- קובץ `README_stage_E.md` זה

